package com.pedidos.reservadegrass.activity;import android.app.ProgressDialog;import android.content.Intent;import android.os.Bundle;import android.view.LayoutInflater;import android.view.View;import android.view.ViewGroup;import android.widget.ImageView;import android.widget.TextView;import com.bumptech.glide.Glide;import com.firebase.ui.firestore.FirestoreRecyclerAdapter;import com.firebase.ui.firestore.FirestoreRecyclerOptions;import com.google.firebase.auth.FirebaseAuth;import com.google.firebase.auth.FirebaseUser;import com.google.firebase.firestore.FirebaseFirestore;import com.google.firebase.firestore.Query;import com.pedidos.reservadegrass.R;import com.pedidos.reservadegrass.data.Comprasdata;import androidx.annotation.NonNull;import androidx.appcompat.app.AppCompatActivity;import androidx.recyclerview.widget.LinearLayoutManager;import androidx.recyclerview.widget.RecyclerView;public class ComprasActivy extends AppCompatActivity {	private FirebaseAuth firebaseAuth;	private FirebaseUser user;	private ProgressDialog progressDialog;	FirebaseFirestore rootRef;	RecyclerView recyclerView;	ImageView finalzar;	private FirestoreRecyclerAdapter adapter;	@Override	protected void onCreate(Bundle savedInstanceState) {		super.onCreate(savedInstanceState);		setContentView(R.layout.activity_compras);		finalzar=findViewById(R.id.back);		finalzar.setOnClickListener(new View.OnClickListener() {			@Override			public void onClick(View view) {				adapter.stopListening();				startActivity(new Intent(ComprasActivy.this, VentasActivity.class));				finish();			}		});		firebaseAuth = FirebaseAuth.getInstance();		rootRef	= FirebaseFirestore.getInstance();		recyclerView= findViewById(R.id.recyclerview);		user = firebaseAuth.getCurrentUser();		String  correo1= user.getEmail();		TextView textView=findViewById(R.id.textNCorreo);		textView.setText( "Bienvenido "+correo1);		Query query = rootRef.collection("compras");	//	Query query = rootRef.collection("reservas").whereEqualTo("id",correo1);		//   .orderBy("dni", Query.Direction.ASCENDING);		FirestoreRecyclerOptions<Comprasdata> response = new FirestoreRecyclerOptions.Builder<Comprasdata>()				                                            .setQuery(query, Comprasdata.class)				                                            .build();		adapter = new FirestoreRecyclerAdapter<Comprasdata , ProductViewHolder>(response) {			@NonNull			@Override			public ProductViewHolder onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {				View view = LayoutInflater.from(parent.getContext()).inflate(R.layout.item_productos, parent, false);				return new ProductViewHolder(view);			}			@Override			protected void onBindViewHolder(@NonNull ProductViewHolder holder, int position, @NonNull Comprasdata model) {				// TextView cancha,fecha,fechafin,estado,tipopago,valorcancha;				holder.nombre.setText(model.getNombre());				holder.precio.setText("$ "+model.getPrecio());				holder.descripcion.setText(model.getMarca());				Glide.with(ComprasActivy.this)						.load(model.getUrl())						.into(holder.imagen);			}		};		recyclerView.setHasFixedSize(true);		recyclerView.setLayoutManager(new LinearLayoutManager(this));		recyclerView.setAdapter(adapter);//	}	private class ProductViewHolder extends RecyclerView.ViewHolder {		//	public View view;		private TextView nombre,precio,descripcion;		ImageView imagen;		ProductViewHolder(View itemView) {			super(itemView);			//view = itemView;			nombre= itemView.findViewById(R.id.tvnombre);			precio  = itemView.findViewById(R.id.tvPrecio);			descripcion  = itemView.findViewById(R.id.tvDescripcion);			imagen  = itemView.findViewById(R.id.imagen);		}/*		void setProductName(String productName) {			TextView textView = view.findViewById(R.id.tvnombre);			textView.setText(productName);		}*/	}	@Override	protected void onStart() {		super.onStart();		adapter.startListening();	}	@Override	protected void onStop() {		super.onStop();		if (adapter != null) {			adapter.stopListening();		}	}	@Override	public void onBackPressed() {		adapter.stopListening();		startActivity(new Intent(ComprasActivy.this, VentasActivity.class));		finish();	}}